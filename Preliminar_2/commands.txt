# Dependencias necesarias
npm install express
npm install kafkajs
npm install mongodb

# Para correr el proyecto
node config-api.js
node config-consumer.js
# Uno primero y el otro después

# Este comando es para insertar un registro en el collection
db.usuarios.insertOne({"id": "1", "nombre": "Sara", "apellido": "Martínez", "email": "saramartinez@example.com", "contrasena": "p@ssw0rd", "fecha_nacimiento": "1998-06-15", "genero": "femenino", "ubicacion": "Mexico", "dispositivos_confianza": ["iPhone X", "MacBook Pro"], "digital_wallet": {"id": "1111", "saldo": 0, "transacciones": []}});

# Esto es para probar el producer y el consumer
docker exec -it kafka bash

# Se corren en terminales direrentes
kafka-console-producer.sh --bootstrap-server kafka:9092 --topic content-update
kafka-console-consumer.sh --bootstrap-server kafka:9092 --topic content-update --from-beginning

docker run --rm -it --net desktop_Network_Caso4 --ip 10.0.0.50 -v "/Users/sebastiancruz/Desktop/Bases_II-Caso_4/Preliminar_2/logstash/pipeline:/usr/share/logstash/pipeline/" -v "/Users/sebastiancruz/Desktop/Bases_II-Caso_4/Preliminar_2/logstash/logstashconfig:/usr/share/logstash/config/" logstash-mongo:latest
